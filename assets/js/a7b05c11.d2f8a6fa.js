"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[498],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(n),c=i,g=m["".concat(l,".").concat(c)]||m[c]||u[c]||r;return n?a.createElement(g,o(o({ref:t},d),{},{components:n})):a.createElement(g,o({ref:t},d))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5601:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={id:"signing",title:"PDF Signing API Calls",sidebar_position:2,keywords:["eseal","e-seal","signing","api","doc","docs","documentation","documents","pdf","grnet"]},o=void 0,s={unversionedId:"esignature/signing",id:"esignature/signing",title:"PDF Signing API Calls",description:"POST - Sign a PDF document",source:"@site/docs/esignature/signing.md",sourceDirName:"esignature",slug:"/esignature/signing",permalink:"/gr.grnet.eseal/docs/esignature/signing",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"signing",title:"PDF Signing API Calls",sidebar_position:2,keywords:["eseal","e-seal","signing","api","doc","docs","documentation","documents","pdf","grnet"]},sidebar:"tutorialSidebar",previous:{title:"E-seal REST API Documentation",permalink:"/gr.grnet.eseal/docs/"},next:{title:"PDF Timestamp API Calls",permalink:"/gr.grnet.eseal/docs/esignature/timestamp"}},l={},p=[{value:"POST - Sign a PDF document",id:"post---sign-a-pdf-document",level:2},{value:"Request",id:"request",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Response Body",id:"response-body",level:3},{value:"POST - Sign a PDF document detached",id:"post---sign-a-pdf-document-detached",level:2},{value:"Request",id:"request-1",level:3},{value:"Request Body",id:"request-body-1",level:3},{value:"Response Body",id:"response-body-1",level:3},{value:"Handling of TOTP",id:"handling-of-totp",level:3},{value:"Errors",id:"errors",level:3}],d={toc:p};function u(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"post---sign-a-pdf-document"},"POST - Sign a PDF document"),(0,i.kt)("h3",{id:"request"},"Request"),(0,i.kt)("b",null,"POST")," @ ",(0,i.kt)("i",null,"/api/v1/signing/remoteSignDocument"),(0,i.kt)("h3",{id:"request-body"},"Request Body"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"username")," : Username to be used at the remote provider API call.\nThe username/password pair maps to a specific eseal.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"password")," : Password to be used at the remote provider API call.\nThe username/password pair maps to a specific eseal.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"key")," :  Key that will be used with the TOTP generation.\nEach username/password pair corresponds to a specific key.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"toSignDocument.bytes")," : PDF document to be signed in base64 encoded format")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"toSignDocument.name"),": Placeholder name for the pdf document"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "username": "example-user",\n    "password": "example-password",\n    "key": "example-key",\n    "toSignDocument": {\n        "name": "document.pdf",\n        "bytes": "JVBERi0xLjM..."\n        }\n}\n')),(0,i.kt)("h3",{id:"response-body"},"Response Body"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "signedDocumentBytes": "JVBER..=="\n}\n')),(0,i.kt)("h2",{id:"post---sign-a-pdf-document-detached"},"POST - Sign a PDF document detached"),(0,i.kt)("p",null,"This API call does not send the entire PDF to the remote eseal provider for signing\nbut rather only the digest(hash) of the provided document, and finally it combines\nthe returned signature with the original pdf document. The signature will also be visible\ncontaining an image and the static text '\u039f.\u03a3.\u0394.\u0394.\u03a5.\u0394.\u0394'.\nIn case of an already existing signature\nin the document, the API will try the following positions in order before disabling\nthe visibility: TOP_LEFT -> BOTTOM_LEFT -> TOP_RIGHT -> BOTTOM_RIGHT -> INVISIBLE."),(0,i.kt)("h3",{id:"request-1"},"Request"),(0,i.kt)("b",null,"POST")," @ ",(0,i.kt)("i",null,"/api/v1/signing/remoteSignDocumentDetached"),(0,i.kt)("h3",{id:"request-body-1"},"Request Body"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"username")," : Username to be used at the remote provider API call.\nThe username/password pair maps to a specific eseal.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"password")," : Password to be used at the remote provider API call.\nThe username/password pair maps to a specific eseal.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"key")," :  Key that will be used with the TOTP generation.\nEach username/password pair corresponds to a specific key.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"imageVisibility(optional, default=true)")," : true or false, about the signature containing\na visual representation as well.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"imageBytes(optional)")," :  Custom image to be included into the visible signature and\noverride the default, in base64 encoded format.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"visibleSignatureText(optional, default=STATIC)")," : Controls the format of the text that is included\nin the visible signature."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"- `STATIC` : Includes the static text of '\u039f.\u03a3.\u0394.\u0394.\u03a5.\u0394.\u0394.'.\n- `CN_OU` : Includes the Common Name/Organisational Unit of the signing certificate.\n- `CN` :  Includes the Common Name of the signing certificate.\n- `OU` : Includes the Organisational Unit of the signing certificate.\n- `TEXT` : Not yet supported.\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"toSignDocument.bytes")," : PDF document to be signed in base64 encoded format")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"toSignDocument.name"),": Placeholder name for the pdf document"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "username": "example-user",     \n  "password": "example-password",     \n  "key": "example-key",   \n  "imageVisibility": true,    \n  "imageBytes": "MJIDdijo...", \n  "toSignDocument": {       \n    "name": "document.pdf",\n    "bytes": "JVBERi0xLjM..."\n  }\n}\n')),(0,i.kt)("h3",{id:"response-body-1"},"Response Body"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "signedDocumentBytes": "JVBER..=="\n}\n')),(0,i.kt)("h3",{id:"handling-of-totp"},"Handling of TOTP"),(0,i.kt)("p",null,"The generated tokens are being created with the use of the ",(0,i.kt)("inlineCode",{parentName:"p"},"SHA1 hashing algorithm"),".\nThey are ",(0,i.kt)("inlineCode",{parentName:"p"},"6 digits long")," and have a\n",(0,i.kt)("inlineCode",{parentName:"p"},"30 seconds duration"),", counting from the beginning of the unix epoch.\nThere are 2 TOTP tokens per minute, one from the ",(0,i.kt)("inlineCode",{parentName:"p"},"0th - 30th")," second and one\nfrom the ",(0,i.kt)("inlineCode",{parentName:"p"},"30th - 60th")," second.\nIn order to compensate for network latency we apply a fail safe mechanism of 5 seconds before\nwe send any generated TOTP to the provider's backend, meaning that tokens acquired\nbetween the ",(0,i.kt)("inlineCode",{parentName:"p"},"25th - 30th")," and the ",(0,i.kt)("inlineCode",{parentName:"p"},"55th - 60th"),"\nseconds of a minute will be waited to expire so a new one can be generated, with enough remaining time,\nin order to give a higher success probability for the request."),(0,i.kt)("h3",{id:"errors"},"Errors"),(0,i.kt)("p",null,"Please refer to section ",(0,i.kt)("a",{parentName:"p",href:"/gr.grnet.eseal/docs/esignature/errors"},"Errors")," to see all possible Errors"))}u.isMDXComponent=!0}}]);